using UnityEngine;
using System.Collections.Generic;

namespace Game.Config
{
    [CreateAssetMenu(fileName = "LocalizationConfig", menuName = "Game/Config/Localization Config")]
    public class LocalizationConfig : ScriptableObject
    {
        [Header("Default Settings")]
        [SerializeField] private SystemLanguage defaultLanguage = SystemLanguage.English;
        [SerializeField] private SystemLanguage fallbackLanguage = SystemLanguage.English;
        [SerializeField] private bool autoDetectSystemLanguage = true;
        
        [Header("Debug Settings")]
        [SerializeField] private bool showMissingKeys = true;
        [SerializeField] private bool logLanguageChanges = true;
        [SerializeField] private bool validateKeysOnStart = false;
        
        [Header("Performance")]
        [SerializeField] private bool preloadStringDatabase = true;
        [SerializeField] private bool cacheTranslations = true;
        
        // Properties
        public SystemLanguage DefaultLanguage => defaultLanguage;
        public SystemLanguage FallbackLanguage => fallbackLanguage;
        public bool AutoDetectSystemLanguage => autoDetectSystemLanguage;
        public bool ShowMissingKeys => showMissingKeys;
        public bool LogLanguageChanges => logLanguageChanges;
        public bool ValidateKeysOnStart => validateKeysOnStart;
        public bool PreloadStringDatabase => preloadStringDatabase;
        public bool CacheTranslations => cacheTranslations;
        
        #if UNITY_EDITOR
        [Header("Editor Debug")]
        [SerializeField] private bool showDebugInfo = false;
        
        private void OnValidate()
        {
            if (showDebugInfo)
            {
                Debug.Log($"[LocalizationConfig] Default: {defaultLanguage}, Fallback: {fallbackLanguage}, " +
                         $"Auto-detect: {autoDetectSystemLanguage}");
            }
        }
        
        [ContextMenu("Log Current Settings")]
        private void LogCurrentSettings()
        {
            Debug.Log("=== Localization Config ===");
            Debug.Log($"Default Language: {defaultLanguage}");
            Debug.Log($"Fallback Language: {fallbackLanguage}");
            Debug.Log($"Auto-detect System Language: {autoDetectSystemLanguage}");
            Debug.Log($"Show Missing Keys: {showMissingKeys}");
            Debug.Log($"Log Language Changes: {logLanguageChanges}");
            Debug.Log($"Validate Keys On Start: {validateKeysOnStart}");
            Debug.Log($"Preload String Database: {preloadStringDatabase}");
            Debug.Log($"Cache Translations: {cacheTranslations}");
        }
        #endif
    }
}